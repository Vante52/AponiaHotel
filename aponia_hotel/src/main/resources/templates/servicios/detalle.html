<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title th:text="|Aponia ‚Äì ${servicio.nombre}|">Aponia ‚Äì Servicio</title>
    <meta name="description" th:content="${servicio.descripcion}" />

    <!-- Tipograf√≠as -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-white text-slate-800 font-inter">
    <!-- Header -->
    <header
      class="sticky top-0 z-30 bg-white/90 backdrop-blur border-b border-slate-200"
    >
      <div class="max-w-6xl mx-auto px-6">
        <div class="flex items-center justify-between h-16">
          <a th:href="@{/}" class="flex items-center gap-2">
            <img
              src="/img/logo_aponia.png"
              alt="Aponia"
              width="40"
              height="40"
              class="rounded-lg"
            />
            <span class="font-serif text-xl font-bold text-primary"
              >Aponia</span
            >
          </a>
          <a
            th:href="@{/servicios/cards}"
            class="text-[#0a3d62] font-medium hover:underline"
            >‚Ü© Volver a servicios</a
          >
        </div>
      </div>
    </header>

    <main class="max-w-6xl mx-auto px-6">
      <!-- Head -->
      <div class="py-6">
        <div class="text-sm text-slate-500">
          <a th:href="@{/}" class="text-[#0a3d62] hover:underline">Inicio</a> ¬∑
          <a
            th:href="@{/servicios/cards}"
            class="text-[#0a3d62] hover:underline"
            >Servicios</a
          >
          ¬∑ <span th:text="${servicio.nombre}">Servicio</span>
        </div>
        <h1
          class="mt-2 font-playfair text-3xl text-[#0a3d62] font-semibold tracking-tight"
          th:text="${servicio.nombre}"
        >
          Nombre Servicio
        </h1>
        <p class="mt-1 text-slate-600" th:text="${servicio.lugar}">Lugar</p>
      </div>

      <!-- Contenido -->
      <div class="grid gap-6 lg:grid-cols-[1.2fr,0.8fr]">
        <!-- Galer√≠a -->
        <section
          class="bg-white border border-slate-200 rounded-2xl shadow-sm p-3"
        >
          <div
            class="h-[420px] rounded-xl overflow-hidden bg-slate-100 grid place-items-center"
            id="hero"
          >
            <img
              th:src="${#lists.isEmpty(servicio.imagenes)} ? @{/img/placeholder-servicio.jpg} : ${servicio.imagenes.get(0).url}"
              alt="Imagen principal del servicio"
              id="heroImg"
              class="w-full h-full object-cover"
            />
          </div>

          <!-- Thumbs -->
          <div
            class="flex gap-2 mt-3 overflow-x-auto pb-1 scrollbar-thin scrollbar-thumb-slate-300"
            id="thumbs"
          >
            <img
              class="thumb active w-24 h-16 object-cover rounded-md border-2 border-transparent cursor-pointer flex-shrink-0"
              th:if="${!#lists.isEmpty(servicio.imagenes)}"
              th:each="img, it : ${servicio.imagenes}"
              th:src="${img.url}"
              th:alt="|Imagen ${it.index + 1}|"
              th:attr="data-src=${img.url}"
            />
          </div>
        </section>

        <!-- Panel reserva/info -->
        <aside
          class="bg-white border border-slate-200 rounded-2xl shadow-sm p-5 flex flex-col gap-4 sticky top-24 h-fit"
        >
          <div
            class="text-2xl font-extrabold text-slate-900"
            th:text="|$ ${#numbers.formatDecimal(servicio.precioPorPersona,0,'POINT',2,'COMMA')} COP|"
          >
            $ 0,00 COP
          </div>

          <div class="flex flex-wrap gap-2">
            <span
              class="px-3 py-1 rounded-full bg-slate-100 text-slate-700 text-xs font-medium"
              th:text="|‚è± ${servicio.duracionMinutos} min|"
              >‚è± 0 min</span
            >
            <span
              class="px-3 py-1 rounded-full bg-slate-100 text-slate-700 text-xs font-medium"
              >üë•
              <span
                th:text="${servicio.capacidadMaxima != null ? servicio.capacidadMaxima : '-'}"
                >-</span
              ></span
            >
            <span
              class="px-3 py-1 rounded-full bg-slate-100 text-slate-700 text-xs font-medium"
              th:text="|üìç ${servicio.lugar}|"
              >üìç Lugar</span
            >
          </div>

          <div class="flex flex-wrap gap-3">
            <a
              class="inline-flex items-center justify-center gap-2 rounded-xl px-5 py-2.5 text-sm font-semibold border border-[#0a3d62] bg-[#0a3d62] text-white shadow-sm hover:shadow-lg transition"
              th:href="@{|/reservas/nueva?servicioId=${servicio.id}|}"
              >Reservar ahora</a
            >
            <a
              class="inline-flex items-center justify-center gap-2 rounded-xl px-5 py-2.5 text-sm font-semibold border border-[#0a3d62] text-[#0a3d62] bg-white hover:bg-slate-50 transition"
              th:href="@{/servicios/cards}"
              >Seguir explorando</a
            >
          </div>

          <div class="text-sm text-slate-500">
            Cancelaci√≥n flexible ¬∑ Mejor precio garantizado
          </div>
        </aside>
      </div>

      <!-- Descripci√≥n -->
      <section
        class="mt-6 bg-white border border-slate-200 rounded-2xl shadow-sm p-6"
      >
        <h2 class="text-xl font-semibold mb-2">Descripci√≥n</h2>
        <div
          class="text-slate-700 leading-relaxed"
          th:text="${servicio.descripcion}"
        >
          Texto descriptivo del servicio‚Ä¶
        </div>
      </section>
    </main>

    <footer
      class="border-t border-slate-200 text-slate-500 text-center text-sm py-4 mt-8"
    >
      ¬© <span id="year"></span> Aponia. Todos los derechos reservados.
    </footer>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear();

      // Galer√≠a: cambiar imagen principal al hacer click en una miniatura
      (function () {
        const heroImg = document.getElementById("heroImg");
        const thumbs = document.querySelectorAll("#thumbs .thumb");
        thumbs.forEach((t) => {
          t.addEventListener("click", () => {
            const src = t.getAttribute("data-src") || t.getAttribute("src");
            if (!src) return;
            heroImg.src = src;
            thumbs.forEach((x) => x.classList.remove("border-[#cfa15a]"));
            t.classList.add("border-[#cfa15a]");
          });
        });
      })();
    </script>
  </body>
</html>
