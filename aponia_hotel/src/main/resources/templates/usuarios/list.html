<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Aponia – Usuarios</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Inter", system-ui, sans-serif;
      }
      h1,
      .brand__name {
        font-family: "Playfair Display", serif;
      }
    </style>
  </head>
  <body class="bg-white text-[#243444] m-0">
    <!-- Navbar -->
    <div th:replace="fragments/navbar_admin :: navbar_admin"></div>

    <main class="max-w-5xl mx-auto px-6">
      <!-- <div
        th:if="${ok}"
        class="my-3 px-4 py-3 rounded-xl border border-green-200 bg-green-50 text-green-800"
        th:text="${ok}"
      >
        Operación exitosa
      </div>

      <div
        th:if="${error}"
        class="my-3 px-4 py-3 rounded-xl border border-red-200 bg-red-50 text-red-800"
        th:text="${error}"
      >
        Error
      </div> -->
      <div class="w-full flex items-center justify-between py-4">
        <div>
          <h1 class="text-[#0a3d62] text-2xl mt-6 mb-1">Usuarios</h1>
          <p class="text-gray-600 mb-3">Gestiona cuentas: email y rol.</p>
        </div>

        <a
          th:href="@{/usuarios/nuevo}"
          class="rounded-xl px-4 py-2 font-semibold shadow text-white bg-amber-600 hover:bg-[#b88e4e]"
        >
          ＋ Nuevo usuario
        </a>
      </div>

      <div
        class="border border-[#e8edf1] rounded-2xl shadow bg-white overflow-hidden"
      >
        <div class="overflow-auto">
          <table class="w-full min-w-[720px] border-collapse">
            <thead>
              <tr>
                <th
                  class="bg-gray-100 text-slate-900 text-xs uppercase tracking-wider text-left px-4 py-3 border-b border-[#e8edf1]"
                >
                  Email
                </th>
                <th
                  class="bg-gray-100 text-slate-900 text-xs uppercase tracking-wider text-left px-4 py-3 border-b border-[#e8edf1]"
                >
                  Rol
                </th>
                <th
                  class="bg-gray-100 text-slate-900 text-xs uppercase tracking-wider text-left px-4 py-3 border-b border-[#e8edf1] text-gray-500"
                >
                  ID
                </th>
                <th
                  class="bg-gray-100 text-slate-900 text-xs uppercase tracking-wider text-left px-4 py-3 border-b border-[#e8edf1]"
                >
                  Acciones
                </th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="u : ${usuarios}" class="hover:bg-gray-50">
                <td class="px-4 py-3" th:text="${u.email}">
                  email@example.com
                </td>
                <td class="px-4 py-3">
                  <span
                    class="inline-block bg-gray-100 border border-[#e8edf1] px-3 py-1 rounded-full text-xs"
                    th:text="${u.rol}"
                  >
                    CLIENTE
                  </span>
                </td>
                <td class="px-4 py-3 text-xs text-gray-500" th:text="${u.id}">
                  uuid
                </td>
                <td class="px-4 py-3">
                  <div class="flex gap-2">
                    <a
                      class="inline-flex items-center gap-1 px-3 py-2 rounded-lg border border-[#0a3d62] text-[#0a3d62] text-sm hover:bg-[#0a3d62]/10"
                      th:href="@{|/usuarios/${u.id}/editar|}"
                    >
                      Editar
                    </a>
                    <form
                      th:action="@{|/usuarios/${u.id}/eliminar|}"
                      method="post"
                      onsubmit="return confirm('¿Eliminar este usuario?');"
                    >
                      <button
                        type="submit"
                        class="px-3 py-2 rounded-lg bg-red-600 text-white text-sm hover:bg-red-700"
                      >
                        Eliminar
                      </button>
                    </form>
                  </div>
                </td>
              </tr>

              <tr th:if="${#lists.isEmpty(usuarios)}">
                <td colspan="4" class="py-7 text-center text-slate-500 text-sm">
                  No hay usuarios creados.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </body>
</html>
